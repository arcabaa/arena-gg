(()=>{"use strict";var e={376:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(853),i=r(276);class s extends o.Collider{constructor(e,t,r){super(e,t),this.radius=r}getCenterCoordinates(){return Object.assign({},this.coords)}collidesWith(e){return(0,i.isCircle)(e)?(0,i.circleToCircleCollision)(this,e):!!(0,i.isRectangle)(e)&&(0,i.circleToRectangleCollision)(this,e)}getCenterXOffset(){return this.radius}getCenterYOffset(){return this.radius}}t.default=s},853:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Collider=void 0,t.Collider=class{constructor(e,t){this.coords={x:e,y:t}}isAtCenterOf(e){const t=e.getCenterCoordinates();return this.isAt(t)}isAt(e){const t=this.getCenterCoordinates();return e.x===t.x&&e.y===t.y}get x(){return this.coords.x}set x(e){this.coords.x=e}get y(){return this.coords.y}set y(e){this.coords.y=e}}},218:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(853),i=r(276);class s extends o.Collider{constructor(e,t,r,o){super(e,t),this.width=r,this.height=o}getCenterCoordinates(){const{coords:{x:e,y:t}}=this;return{x:e+this.width/2,y:t+this.height/2}}collidesWith(e){return(0,i.isCircle)(e)?(0,i.circleToRectangleCollision)(e,this):!!(0,i.isRectangle)(e)&&(0,i.rectangleToRectangleCollision)(this,e)}getCenterXOffset(){return this.width/2}getCenterYOffset(){return this.height/2}}t.default=s},786:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Collider=t.RectangleCollider=t.CircleCollider=void 0;const o=r(376);t.CircleCollider=o.default;const i=r(218);t.RectangleCollider=i.default;const s=r(853);Object.defineProperty(t,"Collider",{enumerable:!0,get:function(){return s.Collider}})},276:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rectangleToRectangleCollision=t.circleToRectangleCollision=t.circleToCircleCollision=t.isRectangle=t.isCircle=void 0,t.isCircle=function(e){return void 0!==e.radius},t.isRectangle=function(e){return void 0!==e.width&&void 0!==e.height},t.circleToCircleCollision=function(e,t){return Math.pow(e.coords.x-t.coords.x,2)+Math.pow(e.coords.y-t.coords.y,2)<=Math.pow(e.radius+t.radius,2)},t.circleToRectangleCollision=function(e,t){const r=Math.abs(e.coords.x-t.coords.x)-t.width/2,o=Math.abs(e.coords.y-t.coords.y)-t.height/2;return!(r>e.radius||o>e.radius)&&(r<=0||o<=0||Math.pow(r,2)+Math.pow(o,2)<=Math.pow(e.radius,2))},t.rectangleToRectangleCollision=function(e,t){return e.coords.x<=t.coords.x+t.width&&e.coords.x+e.width>=t.coords.x&&e.coords.y<=t.coords.y+t.height&&e.coords.y+e.height>=t.coords.y}},699:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreatureFactory=t.Projectile=t.Creature=void 0;const o=r(786);class i{}class s extends i{constructor(e){super(),this.speed=e}step(e){const{collider:{coords:t}}=this;if(e&&!this.collider.isAt(e)){const r=e.y-t.y,o=e.x-t.x;let i,s;if(0===o)i=0,s=r;else{const e=r/o;i=this.speed/Math.sqrt(Math.pow(e,2)+1)*Math.sign(o),s=e*i}const l=i>0?Math.min:Math.max,a=s>0?Math.min:Math.max;this.collider.x=l(t.x+i,e.x),this.collider.y=a(t.y+s,e.y)}}}t.Projectile=class extends s{constructor(e,t,r,o,i){super(e),this.damage=t,this.collider=r,this.target=o,this.attack=i}update(){return this.step(this.target.collider.getCenterCoordinates())}};class l extends s{constructor(e,t,r,o){super(t.movementSpeed),this.collider=e,this.baseStats=t,this.goldValue=r,this.targetCoords=o}get x(){return this.collider.x}get y(){return this.collider.y}takeDamage(e){let t=0;this.baseStats.armor<=0?t+=2-100/(100-this.baseStats.armor):t+=100/(100-this.baseStats.armor);let r=0;this.baseStats.magicResist<0?r+=2-100/(100-this.baseStats.magicResist):r+=100/(100-this.baseStats.magicResist);let o=t+r;console.log(o),o+=Math.max(0,e.physicalDamage-this.baseStats.armor),console.log(o),this.baseStats.health=Math.max(0,this.baseStats.health-o),console.log(`health: ${this.baseStats.health}, AD: ${this.baseStats.attackDamage}, damage given: ${o}`)}autoAttack(){return{physicalDamage:this.baseStats.attackDamage,magicDamage:this.baseStats.abilityPower}}update(){this.step(this.targetCoords)}moveTo(e,t){this.targetCoords={x:e-this.collider.getCenterXOffset(),y:t-this.collider.getCenterYOffset()}}stopMovement(){this.targetCoords=Object.assign({},this.collider.coords)}}t.Creature=l;class a{constructor(){}static get(){return a.instance||(a.instance=new a),a.instance}newCreature(e,t){return{withCircleCollider:this.withCircleCollider(Object.assign({},e),t),withRectangleCollider:this.withRectangleCollider(Object.assign({},e),t)}}withRectangleCollider(e,t){return(r,i,s,a)=>{const c=()=>new o.RectangleCollider(r,i,s,a);return{withTargetCoords:this.withTargetCoords(c(),e,t),build:()=>new l(c(),e,t)}}}withCircleCollider(e,t){return(r,i,s)=>{const a=()=>new o.CircleCollider(r,i,s);return{withTargetCoords:this.withTargetCoords(a(),e,t),build:()=>new l(a(),e,t)}}}withTargetCoords(e,t,r){return(o,i)=>({build:()=>new l(e,t,r,{x:o,y:i})})}}t.CreatureFactory=a}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}(()=>{const e=r(786),t=r(699),o=document.getElementById("cs-canvas"),i=o.getContext("2d"),s=document.createElement("img");s.src="fizz.jpg";const l={player:t.CreatureFactory.get().newCreature({abilityPower:0,attackDamage:80,armor:0,magicResist:0,movementSpeed:4,maxHealth:100,health:100},300).withRectangleCollider(0,0,75,75).build(),playerGold:0,playerCreepScore:0,minions:[],projectiles:[]};function a(e){i.fillStyle="black";const{collider:{coords:t,width:r}}=e;i.fillRect(t.x,t.y-8,r,5)}function c(e){i.fillStyle="tomato";const{baseStats:t,collider:{coords:r,width:o}}=e,s=o*(t.health/t.maxHealth);i.fillRect(r.x,r.y-8,s,5)}o.addEventListener("contextmenu",(e=>{e.preventDefault(),e.stopPropagation()})),o.addEventListener("mousedown",(r=>{const{x:i,y:s}=function(e){return{x:e.clientX-o.offsetLeft,y:e.clientY-o.offsetTop}}(r);!function(r,o,i){const{player:s}=l;if("right"===i){const i=function(e,t){const r=l.minions.find((r=>r.x<=e&&r.x+r.collider.width>=e&&r.y<=t&&r.y+r.collider.height>=t));return r||null}(r,o);null!==i?function(r,o,i){const s=function(r,o,i){return new t.Projectile(6,10,new e.CircleCollider(r.x,r.y,8),o,i)}(r,o,i);l.projectiles.push(s),l.player.stopMovement()}(s.collider.getCenterCoordinates(),i,s.autoAttack()):s.moveTo(r,o)}else"left"===i&&function(e,r){l.minions.push(function(e,r){return t.CreatureFactory.get().newCreature({abilityPower:0,attackDamage:100,armor:10,magicResist:0,movementSpeed:2,maxHealth:500,health:500},16).withRectangleCollider(e,r,55,55).build()}(e,r))}(r,o)}(i,s,function(e){switch(e){case 0:return"left";case 2:return"right";default:return"other"}}(r.button))})),function e(){var t;l.player.update(),l.projectiles.forEach((e=>e.update())),function(e){const t=e.filter((({collider:e,target:t,attack:r})=>!e.isAtCenterOf(t.collider)||(t.takeDamage(r),!1)));l.projectiles=t}(l.projectiles),function(e,t){const r=e.filter((e=>0!==e.baseStats.health||(function(e){const{goldValue:t}=e;l.playerGold+=t,l.playerCreepScore++}(e),!!t.length)));l.minions=r}(l.minions,l.projectiles),i.clearRect(0,0,o.width,o.height),l.minions.forEach((e=>{i.fillStyle="tomato";const{collider:{coords:t,width:r,height:o}}=e;i.fillRect(t.x,t.y,r,o),a(e),c(e)})),l.projectiles.forEach((e=>{i.fillStyle="green";const{collider:{coords:{x:t,y:r},radius:o}}=e;i.beginPath(),i.arc(t,r,o,0,2*Math.PI),i.fill(),i.closePath()})),t=l.player,i.drawImage(s,t.collider.coords.x,t.collider.coords.y,t.collider.width,t.collider.height),a(t),c(t),requestAnimationFrame(e)}()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUMsRUFBRUMsR0FBRyxPQUNoQkMsSUFFSjRILEVBQ0poQyxFQUFRbUQsWUFDUm5ELEVBQVFvRCxJQUFJbEosRUFBR0MsRUFBR0MsRUFBUSxFQUFHLEVBQUk4QixLQUFLbUgsSUFDdENyRCxFQUFRc0QsT0FDUnRELEVBQVF1RCxXQUFXLElBbEJMakQsRUFITEQsRUFBVUMsT0FJdkJOLEVBQVF3RCxVQUFVdEQsRUFBYUksRUFBTzNFLFNBQVNuQixPQUFPTixFQUFHb0csRUFBTzNFLFNBQVNuQixPQUFPTCxFQUFHbUcsRUFBTzNFLFNBQVNILE1BQU84RSxFQUFPM0UsU0FBU0YsUUFDMUhtRixFQUFtQk4sR0FDbkJVLEVBQWdCVixHQWJoQm1ELHNCQUFzQmhCLEVBQzFCLENBUElBLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jcy1nZy8uL3NyYy9jb2xsaWRlcnMvQ2lyY2xlQ29sbGlkZXIudHMiLCJ3ZWJwYWNrOi8vY3MtZ2cvLi9zcmMvY29sbGlkZXJzL0NvbGxpZGVyLnRzIiwid2VicGFjazovL2NzLWdnLy4vc3JjL2NvbGxpZGVycy9SZWN0YW5nbGVDb2xsaWRlci50cyIsIndlYnBhY2s6Ly9jcy1nZy8uL3NyYy9jb2xsaWRlcnMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vY3MtZ2cvLi9zcmMvY29sbGlkZXJzL3V0aWxzLnRzIiwid2VicGFjazovL2NzLWdnLy4vc3JjL3R5cGVzLnRzIiwid2VicGFjazovL2NzLWdnL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2NzLWdnLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbGxpZGVyLCBDb29yZGluYXRlcyB9IGZyb20gXCIuL0NvbGxpZGVyXCI7XHJcbmltcG9ydCB7IGlzQ2lyY2xlLCBpc1JlY3RhbmdsZSwgY2lyY2xlVG9DaXJjbGVDb2xsaXNpb24sIGNpcmNsZVRvUmVjdGFuZ2xlQ29sbGlzaW9uIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENpcmNsZUNvbGxpZGVyIGV4dGVuZHMgQ29sbGlkZXIge1xyXG4gICAgcHVibGljIHJhZGl1czogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgcmFkaXVzOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcih4LCB5KTtcclxuICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q2VudGVyQ29vcmRpbmF0ZXMoKTogQ29vcmRpbmF0ZXMge1xyXG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMuY29vcmRzIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNvbGxpZGVzV2l0aChvdGhlcjogQ29sbGlkZXIpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoaXNDaXJjbGUob3RoZXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjaXJjbGVUb0NpcmNsZUNvbGxpc2lvbih0aGlzLCBvdGhlcik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc1JlY3RhbmdsZShvdGhlcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNpcmNsZVRvUmVjdGFuZ2xlQ29sbGlzaW9uKHRoaXMsIG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDZW50ZXJYT2Zmc2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJhZGl1cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q2VudGVyWU9mZnNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXM7XHJcbiAgICB9XHJcbn1cclxuIiwiaW50ZXJmYWNlIENvb3JkaW5hdGVzIHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgQ29sbGlkZXIge1xyXG4gICAgcHVibGljIGNvb3JkczogQ29vcmRpbmF0ZXM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmNvb3JkcyA9IHsgeCwgeSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0F0Q2VudGVyT2Yob3RoZXI6IENvbGxpZGVyKSB7XHJcbiAgICAgICAgY29uc3Qgb3RoZXJDZW50ZXJDb29yZHMgPSBvdGhlci5nZXRDZW50ZXJDb29yZGluYXRlcygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQXQob3RoZXJDZW50ZXJDb29yZHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0F0KG90aGVyQ29vcmRzOiBDb29yZGluYXRlcykge1xyXG4gICAgICAgIGNvbnN0IGNlbnRlckNvb3JkcyA9IHRoaXMuZ2V0Q2VudGVyQ29vcmRpbmF0ZXMoKTtcclxuICAgICAgICByZXR1cm4gb3RoZXJDb29yZHMueCA9PT0gY2VudGVyQ29vcmRzLnggJiYgb3RoZXJDb29yZHMueSA9PT0gY2VudGVyQ29vcmRzLnk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB4KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvb3Jkcy54O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgeCh4OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmNvb3Jkcy54ID0geDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29vcmRzLnk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCB5KHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuY29vcmRzLnkgPSB5O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjb2xsaWRlc1dpdGgob3RoZXI6IENvbGxpZGVyKTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRDZW50ZXJDb29yZGluYXRlcygpOiBDb29yZGluYXRlcztcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRDZW50ZXJYT2Zmc2V0KCk6IG51bWJlcjtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRDZW50ZXJZT2Zmc2V0KCk6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IHsgQ29sbGlkZXIsIENvb3JkaW5hdGVzIH07XHJcbiIsImltcG9ydCB7IENvbGxpZGVyLCBDb29yZGluYXRlcyB9IGZyb20gXCIuL0NvbGxpZGVyXCI7XHJcbmltcG9ydCB7IGNpcmNsZVRvUmVjdGFuZ2xlQ29sbGlzaW9uLCBpc0NpcmNsZSwgaXNSZWN0YW5nbGUsIHJlY3RhbmdsZVRvUmVjdGFuZ2xlQ29sbGlzaW9uIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlY3RhbmdsZUNvbGxpZGVyIGV4dGVuZHMgQ29sbGlkZXIge1xyXG4gICAgcHVibGljIHdpZHRoOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKHgsIHkpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q2VudGVyQ29vcmRpbmF0ZXMoKTogQ29vcmRpbmF0ZXMge1xyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgY29vcmRzOiB7IHgsIHkgfSxcclxuICAgICAgICB9ID0gdGhpcztcclxuICAgICAgICByZXR1cm4geyB4OiB4ICsgdGhpcy53aWR0aCAvIDIsIHk6IHkgKyB0aGlzLmhlaWdodCAvIDIgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29sbGlkZXNXaXRoKG90aGVyOiBDb2xsaWRlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChpc0NpcmNsZShvdGhlcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNpcmNsZVRvUmVjdGFuZ2xlQ29sbGlzaW9uKG90aGVyLCB0aGlzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzUmVjdGFuZ2xlKG90aGVyKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVjdGFuZ2xlVG9SZWN0YW5nbGVDb2xsaXNpb24odGhpcywgb3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENlbnRlclhPZmZzZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkdGggLyAyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDZW50ZXJZT2Zmc2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhlaWdodCAvIDI7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IENpcmNsZUNvbGxpZGVyIGZyb20gXCIuL0NpcmNsZUNvbGxpZGVyXCI7XHJcbmltcG9ydCBSZWN0YW5nbGVDb2xsaWRlciBmcm9tIFwiLi9SZWN0YW5nbGVDb2xsaWRlclwiO1xyXG5pbXBvcnQgeyBDb2xsaWRlciwgQ29vcmRpbmF0ZXMgfSBmcm9tIFwiLi9Db2xsaWRlclwiO1xyXG5cclxuZXhwb3J0IHsgQ2lyY2xlQ29sbGlkZXIsIFJlY3RhbmdsZUNvbGxpZGVyLCBDb29yZGluYXRlcywgQ29sbGlkZXIgfTtcclxuIiwiaW1wb3J0IHsgQ29sbGlkZXIgfSBmcm9tIFwiLi9Db2xsaWRlclwiO1xyXG5pbXBvcnQgQ2lyY2xlQ29sbGlkZXIgZnJvbSBcIi4vQ2lyY2xlQ29sbGlkZXJcIjtcclxuaW1wb3J0IFJlY3RhbmdsZUNvbGxpZGVyIGZyb20gXCIuL1JlY3RhbmdsZUNvbGxpZGVyXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNDaXJjbGUoY29sbGlkZXI6IENvbGxpZGVyKTogY29sbGlkZXIgaXMgQ2lyY2xlQ29sbGlkZXIge1xyXG4gICAgcmV0dXJuIChjb2xsaWRlciBhcyBDaXJjbGVDb2xsaWRlcikucmFkaXVzICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1JlY3RhbmdsZShjb2xsaWRlcjogQ29sbGlkZXIpOiBjb2xsaWRlciBpcyBSZWN0YW5nbGVDb2xsaWRlciB7XHJcbiAgICByZXR1cm4gKGNvbGxpZGVyIGFzIFJlY3RhbmdsZUNvbGxpZGVyKS53aWR0aCAhPT0gdW5kZWZpbmVkICYmIChjb2xsaWRlciBhcyBSZWN0YW5nbGVDb2xsaWRlcikuaGVpZ2h0ICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjaXJjbGVUb0NpcmNsZUNvbGxpc2lvbihjMTogQ2lyY2xlQ29sbGlkZXIsIGMyOiBDaXJjbGVDb2xsaWRlcik6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIChjMS5jb29yZHMueCAtIGMyLmNvb3Jkcy54KSAqKiAyICsgKGMxLmNvb3Jkcy55IC0gYzIuY29vcmRzLnkpICoqIDIgPD0gKGMxLnJhZGl1cyArIGMyLnJhZGl1cykgKiogMjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNpcmNsZVRvUmVjdGFuZ2xlQ29sbGlzaW9uKGNpcmM6IENpcmNsZUNvbGxpZGVyLCByZWN0OiBSZWN0YW5nbGVDb2xsaWRlcik6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgZGVsdGFYID0gTWF0aC5hYnMoY2lyYy5jb29yZHMueCAtIHJlY3QuY29vcmRzLngpIC0gcmVjdC53aWR0aCAvIDI7XHJcbiAgICBjb25zdCBkZWx0YVkgPSBNYXRoLmFicyhjaXJjLmNvb3Jkcy55IC0gcmVjdC5jb29yZHMueSkgLSByZWN0LmhlaWdodCAvIDI7XHJcblxyXG4gICAgaWYgKGRlbHRhWCA+IGNpcmMucmFkaXVzIHx8IGRlbHRhWSA+IGNpcmMucmFkaXVzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmIChkZWx0YVggPD0gMCB8fCBkZWx0YVkgPD0gMCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlbHRhWCAqKiAyICsgZGVsdGFZICoqIDIgPD0gY2lyYy5yYWRpdXMgKiogMjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlY3RhbmdsZVRvUmVjdGFuZ2xlQ29sbGlzaW9uKHJlY3QxOiBSZWN0YW5nbGVDb2xsaWRlciwgcmVjdDI6IFJlY3RhbmdsZUNvbGxpZGVyKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIHJlY3QxLmNvb3Jkcy54IDw9IHJlY3QyLmNvb3Jkcy54ICsgcmVjdDIud2lkdGggJiZcclxuICAgICAgICByZWN0MS5jb29yZHMueCArIHJlY3QxLndpZHRoID49IHJlY3QyLmNvb3Jkcy54ICYmXHJcbiAgICAgICAgcmVjdDEuY29vcmRzLnkgPD0gcmVjdDIuY29vcmRzLnkgKyByZWN0Mi5oZWlnaHQgJiZcclxuICAgICAgICByZWN0MS5jb29yZHMueSArIHJlY3QxLmhlaWdodCA+PSByZWN0Mi5jb29yZHMueVxyXG4gICAgKTtcclxufVxyXG4iLCJpbXBvcnQgeyBDaXJjbGVDb2xsaWRlciwgUmVjdGFuZ2xlQ29sbGlkZXIsIENvbGxpZGVyLCBDb29yZGluYXRlcyB9IGZyb20gXCIuL2NvbGxpZGVyc1wiO1xyXG5cclxuYWJzdHJhY3QgY2xhc3MgR2FtZU9iamVjdDxUIGV4dGVuZHMgQ29sbGlkZXI+IHtcclxuICAgIHB1YmxpYyBjb2xsaWRlcjogVDtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCB1cGRhdGUoKTogdm9pZDtcclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgTW92ZWFibGVHYW1lT2JqZWN0PFQgZXh0ZW5kcyBDb2xsaWRlcj4gZXh0ZW5kcyBHYW1lT2JqZWN0PFQ+IHtcclxuICAgIHB1YmxpYyBzcGVlZDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNwZWVkOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGVzIGNyZWF0dXJlIGNvb3JkaW5hdGVzIGZvciBhIHNpbmdsZSBmcmFtZVxyXG4gICAgcHJvdGVjdGVkIHN0ZXAodGFyZ2V0Q29vcmRzOiBDb29yZGluYXRlcykge1xyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgY29sbGlkZXI6IHsgY29vcmRzIH0sXHJcbiAgICAgICAgfSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGlmICghdGFyZ2V0Q29vcmRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmNvbGxpZGVyLmlzQXQodGFyZ2V0Q29vcmRzKSkge1xyXG4gICAgICAgICAgICBjb25zdCBkZWx0YVkgPSB0YXJnZXRDb29yZHMueSAtIGNvb3Jkcy55O1xyXG4gICAgICAgICAgICBjb25zdCBkZWx0YVggPSB0YXJnZXRDb29yZHMueCAtIGNvb3Jkcy54O1xyXG5cclxuICAgICAgICAgICAgbGV0IHgsIHk7XHJcbiAgICAgICAgICAgIGlmIChkZWx0YVggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHggPSAwO1xyXG4gICAgICAgICAgICAgICAgeSA9IGRlbHRhWTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNsb3BlID0gZGVsdGFZIC8gZGVsdGFYO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuc3BlZWQgLyBNYXRoLnNxcnQoc2xvcGUgKiogMiArIDEpO1xyXG4gICAgICAgICAgICAgICAgeCA9IHQgKiBNYXRoLnNpZ24oZGVsdGFYKTtcclxuICAgICAgICAgICAgICAgIHkgPSBzbG9wZSAqIHg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1pbk1heFggPSB4ID4gMCA/IE1hdGgubWluIDogTWF0aC5tYXg7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pbk1heFkgPSB5ID4gMCA/IE1hdGgubWluIDogTWF0aC5tYXg7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbGxpZGVyLnggPSBtaW5NYXhYKGNvb3Jkcy54ICsgeCwgdGFyZ2V0Q29vcmRzLngpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbGxpZGVyLnkgPSBtaW5NYXhZKGNvb3Jkcy55ICsgeSwgdGFyZ2V0Q29vcmRzLnkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUHJvamVjdGlsZTxUIGV4dGVuZHMgQ29sbGlkZXI+IGV4dGVuZHMgTW92ZWFibGVHYW1lT2JqZWN0PFQ+IHtcclxuICAgIHB1YmxpYyBkYW1hZ2U6IG51bWJlcjtcclxuICAgIHB1YmxpYyBjb2xsaWRlcjogVDtcclxuICAgIHB1YmxpYyB0YXJnZXQ6IENyZWF0dXJlPFJlY3RhbmdsZUNvbGxpZGVyIHwgQ2lyY2xlQ29sbGlkZXI+O1xyXG4gICAgcHVibGljIGF0dGFjazogQXR0YWNrO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNwZWVkOiBudW1iZXIsIGRhbWFnZTogbnVtYmVyLCBjb2xsaWRlcjogVCwgdGFyZ2V0OiBDcmVhdHVyZTxSZWN0YW5nbGVDb2xsaWRlciB8IENpcmNsZUNvbGxpZGVyPiwgYXR0YWNrOiBBdHRhY2spIHtcclxuICAgICAgICBzdXBlcihzcGVlZCk7XHJcbiAgICAgICAgdGhpcy5kYW1hZ2UgPSBkYW1hZ2U7XHJcbiAgICAgICAgdGhpcy5jb2xsaWRlciA9IGNvbGxpZGVyO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuYXR0YWNrID0gYXR0YWNrO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcCh0aGlzLnRhcmdldC5jb2xsaWRlci5nZXRDZW50ZXJDb29yZGluYXRlcygpKTtcclxuICAgIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIEF0dGFjayB7XHJcbiAgICBwaHlzaWNhbERhbWFnZTogbnVtYmVyO1xyXG4gICAgbWFnaWNEYW1hZ2U6IG51bWJlcjtcclxuICAgIC8vIGFybW9yIHBlbiwgbWFnaWMgcGVuXHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0cyB7XHJcbiAgICBoZWFsdGg6IG51bWJlcjtcclxuICAgIG1heEhlYWx0aDogbnVtYmVyO1xyXG4gICAgbW92ZW1lbnRTcGVlZDogbnVtYmVyO1xyXG4gICAgYXR0YWNrRGFtYWdlOiBudW1iZXI7XHJcbiAgICBhYmlsaXR5UG93ZXI6IG51bWJlcjtcclxuICAgIGFybW9yOiBudW1iZXI7XHJcbiAgICBtYWdpY1Jlc2lzdDogbnVtYmVyO1xyXG4gICAgLy8gVE9ETzpcclxuICAgIC8vIHJlc2VhcmNoIGFsbCBwb3NzaWJsZSBzdGF0c1xyXG4gICAgLy8gYXR0YWNrIHNwZWVkLCBjcml0IGNoYW5jZSwgY3JpdCBkbWcsIG1wNSwgaHA1XHJcbn1cclxuXHJcbmNsYXNzIENyZWF0dXJlPFQgZXh0ZW5kcyBDb2xsaWRlcj4gZXh0ZW5kcyBNb3ZlYWJsZUdhbWVPYmplY3Q8VD4ge1xyXG4gICAgcHVibGljIGJhc2VTdGF0czogU3RhdHM7XHJcbiAgICBwdWJsaWMgZ29sZFZhbHVlOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgdGFyZ2V0Q29vcmRzPzogQ29vcmRpbmF0ZXM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29sbGlkZXI6IFQsIGJhc2VTdGF0czogU3RhdHMsIGdvbGRWYWx1ZTogbnVtYmVyLCB0YXJnZXRDb29yZHM/OiBDb29yZGluYXRlcykge1xyXG4gICAgICAgIHN1cGVyKGJhc2VTdGF0cy5tb3ZlbWVudFNwZWVkKTtcclxuICAgICAgICB0aGlzLmNvbGxpZGVyID0gY29sbGlkZXI7XHJcbiAgICAgICAgdGhpcy5iYXNlU3RhdHMgPSBiYXNlU3RhdHM7XHJcbiAgICAgICAgdGhpcy5nb2xkVmFsdWUgPSBnb2xkVmFsdWU7XHJcbiAgICAgICAgdGhpcy50YXJnZXRDb29yZHMgPSB0YXJnZXRDb29yZHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB4KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxpZGVyLng7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxpZGVyLnk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRha2VEYW1hZ2UoYXR0YWNrOiBBdHRhY2spIHtcclxuICAgICAgICAvLyBBcm1vciBDYWxjdWxhdGlvblxyXG4gICAgICAgIGxldCBkYW1hZ2VBZnRlckFybW9yID0gMDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYmFzZVN0YXRzLmFybW9yIDw9IDApIHtcclxuICAgICAgICAgICAgZGFtYWdlQWZ0ZXJBcm1vciArPSAyIC0gMTAwIC8gKDEwMCAtIHRoaXMuYmFzZVN0YXRzLmFybW9yKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYW1hZ2VBZnRlckFybW9yICs9IDEwMCAvICgxMDAgLSB0aGlzLmJhc2VTdGF0cy5hcm1vcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBNYWdpYyBSZXNpc3QgQ2FsY3VsYXRpb25cclxuICAgICAgICBsZXQgZGFtYWdlQWZ0ZXJNYWdpY1Jlc2lzdCA9IDA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmJhc2VTdGF0cy5tYWdpY1Jlc2lzdCA8IDApIHtcclxuICAgICAgICAgICAgZGFtYWdlQWZ0ZXJNYWdpY1Jlc2lzdCArPSAyIC0gMTAwIC8gKDEwMCAtIHRoaXMuYmFzZVN0YXRzLm1hZ2ljUmVzaXN0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYW1hZ2VBZnRlck1hZ2ljUmVzaXN0ICs9IDEwMCAvICgxMDAgLSB0aGlzLmJhc2VTdGF0cy5tYWdpY1Jlc2lzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdG90YWxEYW1hZ2UgPSBkYW1hZ2VBZnRlckFybW9yICsgZGFtYWdlQWZ0ZXJNYWdpY1Jlc2lzdDtcclxuICAgICAgICBjb25zb2xlLmxvZyh0b3RhbERhbWFnZSk7XHJcbiAgICAgICAgdG90YWxEYW1hZ2UgKz0gTWF0aC5tYXgoMCwgYXR0YWNrLnBoeXNpY2FsRGFtYWdlIC0gdGhpcy5iYXNlU3RhdHMuYXJtb3IpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRvdGFsRGFtYWdlKTtcclxuICAgICAgICB0aGlzLmJhc2VTdGF0cy5oZWFsdGggPSBNYXRoLm1heCgwLCB0aGlzLmJhc2VTdGF0cy5oZWFsdGggLSB0b3RhbERhbWFnZSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYGhlYWx0aDogJHt0aGlzLmJhc2VTdGF0cy5oZWFsdGh9LCBBRDogJHt0aGlzLmJhc2VTdGF0cy5hdHRhY2tEYW1hZ2V9LCBkYW1hZ2UgZ2l2ZW46ICR7dG90YWxEYW1hZ2V9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGF1dG9BdHRhY2soKTogQXR0YWNrIHtcclxuICAgICAgICByZXR1cm4geyBwaHlzaWNhbERhbWFnZTogdGhpcy5iYXNlU3RhdHMuYXR0YWNrRGFtYWdlLCBtYWdpY0RhbWFnZTogdGhpcy5iYXNlU3RhdHMuYWJpbGl0eVBvd2VyIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZSgpIHtcclxuICAgICAgICB0aGlzLnN0ZXAodGhpcy50YXJnZXRDb29yZHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtb3ZlVG8oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnRhcmdldENvb3JkcyA9IHsgeDogeCAtIHRoaXMuY29sbGlkZXIuZ2V0Q2VudGVyWE9mZnNldCgpLCB5OiB5IC0gdGhpcy5jb2xsaWRlci5nZXRDZW50ZXJZT2Zmc2V0KCkgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RvcE1vdmVtZW50KCkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Q29vcmRzID0geyAuLi50aGlzLmNvbGxpZGVyLmNvb3JkcyB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBDaGFtcGlvbjxUIGV4dGVuZHMgQ29sbGlkZXI+IGV4dGVuZHMgQ3JlYXR1cmU8VD4ge1xyXG4gICAgcHVibGljIGxldmVsOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYmFzZVN0YXRzOiBTdGF0cywgY29sbGlkZXI6IFQsIGdvbGRWYWx1ZTogbnVtYmVyLCBsZXZlbD86IG51bWJlciwgdGFyZ2V0Q29vcmRzPzogQ29vcmRpbmF0ZXMpIHtcclxuICAgICAgICBzdXBlcihjb2xsaWRlciwgYmFzZVN0YXRzLCBnb2xkVmFsdWUsIHRhcmdldENvb3Jkcyk7XHJcbiAgICAgICAgdGhpcy5sZXZlbCA9IGxldmVsID8/IDE7XHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVTdGF0c0ZvckxldmVsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVTdGF0c0ZvckxldmVsKCkge1xyXG4gICAgICAgIC8vIHRoaXMuYmFzZVN0YXRzID0ge1xyXG4gICAgICAgIC8vICAgICAvLyBzZXQgc3RhdHMgYmFzZWQgb24gbGV2ZWxcclxuICAgICAgICAvLyAgICAgYXR0YWNrRGFtYWdlOiB0aGlzLmJhc2VTdGF0cy5hdHRhY2tEYW1hZ2UgKiB0aGlzLmxldmVsLFxyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbGV2ZWxVcCgpIHtcclxuICAgICAgICB0aGlzLmxldmVsKys7XHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVTdGF0c0ZvckxldmVsKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENyZWF0dXJlRmFjdG9yeSB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQ3JlYXR1cmVGYWN0b3J5O1xyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0KCkge1xyXG4gICAgICAgIGlmICghQ3JlYXR1cmVGYWN0b3J5Lmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIENyZWF0dXJlRmFjdG9yeS5pbnN0YW5jZSA9IG5ldyBDcmVhdHVyZUZhY3RvcnkoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENyZWF0dXJlRmFjdG9yeS5pbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbmV3Q3JlYXR1cmUoc3RhdHM6IFN0YXRzLCBnb2xkVmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpdGhDaXJjbGVDb2xsaWRlcjogdGhpcy53aXRoQ2lyY2xlQ29sbGlkZXIoeyAuLi5zdGF0cyB9LCBnb2xkVmFsdWUpLFxyXG4gICAgICAgICAgICB3aXRoUmVjdGFuZ2xlQ29sbGlkZXI6IHRoaXMud2l0aFJlY3RhbmdsZUNvbGxpZGVyKHsgLi4uc3RhdHMgfSwgZ29sZFZhbHVlKSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgd2l0aFJlY3RhbmdsZUNvbGxpZGVyKHN0YXRzOiBTdGF0cywgZ29sZFZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjcmVhdGVDb2xsaWRlciA9ICgpID0+IG5ldyBSZWN0YW5nbGVDb2xsaWRlcih4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHdpdGhUYXJnZXRDb29yZHM6IHRoaXMud2l0aFRhcmdldENvb3JkcyhjcmVhdGVDb2xsaWRlcigpLCBzdGF0cywgZ29sZFZhbHVlKSxcclxuICAgICAgICAgICAgICAgIGJ1aWxkOiAoKSA9PiBuZXcgQ3JlYXR1cmUoY3JlYXRlQ29sbGlkZXIoKSwgc3RhdHMsIGdvbGRWYWx1ZSksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHdpdGhDaXJjbGVDb2xsaWRlcihzdGF0czogU3RhdHMsIGdvbGRWYWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh4OiBudW1iZXIsIHk6IG51bWJlciwgcmFkaXVzOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3JlYXRlQ29sbGlkZXIgPSAoKSA9PiBuZXcgQ2lyY2xlQ29sbGlkZXIoeCwgeSwgcmFkaXVzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHdpdGhUYXJnZXRDb29yZHM6IHRoaXMud2l0aFRhcmdldENvb3JkcyhjcmVhdGVDb2xsaWRlcigpLCBzdGF0cywgZ29sZFZhbHVlKSxcclxuICAgICAgICAgICAgICAgIGJ1aWxkOiAoKSA9PiBuZXcgQ3JlYXR1cmUoY3JlYXRlQ29sbGlkZXIoKSwgc3RhdHMsIGdvbGRWYWx1ZSksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHdpdGhUYXJnZXRDb29yZHMoY29sbGlkZXI6IENvbGxpZGVyLCBzdGF0czogU3RhdHMsIGdvbGRWYWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgYnVpbGQ6ICgpID0+IG5ldyBDcmVhdHVyZShjb2xsaWRlciwgc3RhdHMsIGdvbGRWYWx1ZSwgeyB4LCB5IH0pLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbnR5cGUgUGxheWVyID0gQ3JlYXR1cmU8UmVjdGFuZ2xlQ29sbGlkZXI+O1xyXG50eXBlIE1pbmlvbiA9IENyZWF0dXJlPFJlY3RhbmdsZUNvbGxpZGVyPjtcclxudHlwZSBBdHRhY2tQcm9qZWN0aWxlID0gUHJvamVjdGlsZTxDaXJjbGVDb2xsaWRlcj47XHJcblxyXG50eXBlIEdhbWVTdGF0ZSA9IHtcclxuICAgIHBsYXllcjogUGxheWVyO1xyXG4gICAgcGxheWVyR29sZDogbnVtYmVyO1xyXG4gICAgcGxheWVyQ3JlZXBTY29yZTogbnVtYmVyO1xyXG4gICAgbWluaW9uczogTWluaW9uW107XHJcbiAgICBwcm9qZWN0aWxlczogQXR0YWNrUHJvamVjdGlsZVtdO1xyXG59O1xyXG5cclxuZXhwb3J0IHsgQ29vcmRpbmF0ZXMsIENyZWF0dXJlLCBQcm9qZWN0aWxlLCBDcmVhdHVyZUZhY3RvcnksIEdhbWVTdGF0ZSwgUGxheWVyLCBNaW5pb24sIEF0dGFja1Byb2plY3RpbGUsIEF0dGFjaywgU3RhdHMgfTtcclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImltcG9ydCB7IENpcmNsZUNvbGxpZGVyLCBSZWN0YW5nbGVDb2xsaWRlciB9IGZyb20gXCIuL2NvbGxpZGVyc1wiO1xyXG5pbXBvcnQgeyBHYW1lU3RhdGUsIENyZWF0dXJlLCBDcmVhdHVyZUZhY3RvcnksIENvb3JkaW5hdGVzLCBQbGF5ZXIsIEF0dGFja1Byb2plY3RpbGUsIE1pbmlvbiwgUHJvamVjdGlsZSwgQXR0YWNrLCBTdGF0cyB9IGZyb20gXCIuL3R5cGVzXCI7XHJcblxyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNzLWNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5jb25zdCBwbGF5ZXJJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbnBsYXllckltYWdlLnNyYyA9IFwiZml6ei5qcGdcIjtcclxuXHJcbmNvbnN0IGdhbWVTdGF0ZTogR2FtZVN0YXRlID0ge1xyXG4gICAgcGxheWVyOiBjcmVhdGVQbGF5ZXIoKSxcclxuICAgIHBsYXllckdvbGQ6IDAsIC8vIHRvZG86IGZpeCB0aGlzIGxhdGVyXHJcbiAgICBwbGF5ZXJDcmVlcFNjb3JlOiAwLCAvLyB0b2RvOiBmaXggdGhpcyBsYXRlclxyXG4gICAgbWluaW9uczogW10sXHJcbiAgICBwcm9qZWN0aWxlczogW10sXHJcbn07XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVQbGF5ZXIoKSB7XHJcbiAgICBjb25zdCBwbGF5ZXJTdGF0czogU3RhdHMgPSB7IGFiaWxpdHlQb3dlcjogMCwgYXR0YWNrRGFtYWdlOiA4MCwgYXJtb3I6IDAsIG1hZ2ljUmVzaXN0OiAwLCBtb3ZlbWVudFNwZWVkOiA0LCBtYXhIZWFsdGg6IDEwMCwgaGVhbHRoOiAxMDAgfTtcclxuICAgIHJldHVybiBDcmVhdHVyZUZhY3RvcnkuZ2V0KCkubmV3Q3JlYXR1cmUocGxheWVyU3RhdHMsIDMwMCkud2l0aFJlY3RhbmdsZUNvbGxpZGVyKDAsIDAsIDc1LCA3NSkuYnVpbGQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTWluaW9uKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBtaW5pb25TdGF0czogU3RhdHMgPSB7IGFiaWxpdHlQb3dlcjogMCwgYXR0YWNrRGFtYWdlOiAxMDAsIGFybW9yOiAxMCwgbWFnaWNSZXNpc3Q6IDAsIG1vdmVtZW50U3BlZWQ6IDIsIG1heEhlYWx0aDogNTAwLCBoZWFsdGg6IDUwMCB9O1xyXG4gICAgcmV0dXJuIENyZWF0dXJlRmFjdG9yeS5nZXQoKS5uZXdDcmVhdHVyZShtaW5pb25TdGF0cywgMTYpLndpdGhSZWN0YW5nbGVDb2xsaWRlcih4LCB5LCA1NSwgNTUpLmJ1aWxkKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVByb2plY3RpbGUob3JpZ2luOiBDb29yZGluYXRlcywgdGFyZ2V0OiBDcmVhdHVyZTxSZWN0YW5nbGVDb2xsaWRlciB8IENpcmNsZUNvbGxpZGVyPiwgYXR0YWNrOiBBdHRhY2spOiBBdHRhY2tQcm9qZWN0aWxlIHtcclxuICAgIHJldHVybiBuZXcgUHJvamVjdGlsZSg2LCAxMCwgbmV3IENpcmNsZUNvbGxpZGVyKG9yaWdpbi54LCBvcmlnaW4ueSwgOCksIHRhcmdldCwgYXR0YWNrKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnQoKSB7XHJcbiAgICBpbml0KCk7XHJcbiAgICBnYW1lTG9vcCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnYW1lTG9vcCgpIHtcclxuICAgIHVwZGF0ZSgpO1xyXG4gICAgcmVuZGVyKCk7XHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZ2FtZUxvb3ApO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgcmVuZGVyTWluaW9ucyhnYW1lU3RhdGUubWluaW9ucyk7XHJcbiAgICByZW5kZXJQcm9qZWN0aWxlcyhnYW1lU3RhdGUucHJvamVjdGlsZXMpO1xyXG4gICAgcmVuZGVyUGxheWVyKGdhbWVTdGF0ZS5wbGF5ZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJQbGF5ZXIocGxheWVyOiBQbGF5ZXIpIHtcclxuICAgIGNvbnRleHQuZHJhd0ltYWdlKHBsYXllckltYWdlLCBwbGF5ZXIuY29sbGlkZXIuY29vcmRzLngsIHBsYXllci5jb2xsaWRlci5jb29yZHMueSwgcGxheWVyLmNvbGxpZGVyLndpZHRoLCBwbGF5ZXIuY29sbGlkZXIuaGVpZ2h0KTtcclxuICAgIHJlbmRlck1heEhlYWx0aEJhcihwbGF5ZXIpO1xyXG4gICAgcmVuZGVySGVhbHRoQmFyKHBsYXllcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlclByb2plY3RpbGVzKHByb2plY3RpbGVzOiBBdHRhY2tQcm9qZWN0aWxlW10pIHtcclxuICAgIHByb2plY3RpbGVzLmZvckVhY2goKHByb2plY3RpbGUpID0+IHtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwiZ3JlZW5cIjtcclxuICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgIGNvbGxpZGVyOiB7XHJcbiAgICAgICAgICAgICAgICBjb29yZHM6IHsgeCwgeSB9LFxyXG4gICAgICAgICAgICAgICAgcmFkaXVzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0gPSBwcm9qZWN0aWxlO1xyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5hcmMoeCwgeSwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICAgICAgY29udGV4dC5maWxsKCk7XHJcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJNaW5pb25zKG1pbmlvbnM6IE1pbmlvbltdKSB7XHJcbiAgICBtaW5pb25zLmZvckVhY2goKG1pbmlvbikgPT4ge1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gXCJ0b21hdG9cIjtcclxuICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgIGNvbGxpZGVyOiB7IGNvb3Jkcywgd2lkdGgsIGhlaWdodCB9LFxyXG4gICAgICAgIH0gPSBtaW5pb247XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdChjb29yZHMueCwgY29vcmRzLnksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgIHJlbmRlck1heEhlYWx0aEJhcihtaW5pb24pO1xyXG4gICAgICAgIHJlbmRlckhlYWx0aEJhcihtaW5pb24pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlck1heEhlYWx0aEJhcihjcmVhdHVyZTogQ3JlYXR1cmU8UmVjdGFuZ2xlQ29sbGlkZXI+KSB7XHJcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuICAgIGNvbnN0IHtcclxuICAgICAgICBjb2xsaWRlcjogeyBjb29yZHMsIHdpZHRoIH0sXHJcbiAgICB9ID0gY3JlYXR1cmU7XHJcbiAgICBjb250ZXh0LmZpbGxSZWN0KGNvb3Jkcy54LCBjb29yZHMueSAtIDgsIHdpZHRoLCA1KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVySGVhbHRoQmFyKGNyZWF0dXJlOiBDcmVhdHVyZTxSZWN0YW5nbGVDb2xsaWRlcj4pIHtcclxuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gXCJ0b21hdG9cIjtcclxuICAgIGNvbnN0IHtcclxuICAgICAgICBiYXNlU3RhdHMsXHJcbiAgICAgICAgY29sbGlkZXI6IHsgY29vcmRzLCB3aWR0aCB9LFxyXG4gICAgfSA9IGNyZWF0dXJlO1xyXG4gICAgY29uc3QgaGVhbHRoVG9XaWR0aCA9IHdpZHRoICogKGJhc2VTdGF0cy5oZWFsdGggLyBiYXNlU3RhdHMubWF4SGVhbHRoKTtcclxuICAgIGNvbnRleHQuZmlsbFJlY3QoY29vcmRzLngsIGNvb3Jkcy55IC0gOCwgaGVhbHRoVG9XaWR0aCwgNSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZSgpIHtcclxuICAgIGdhbWVTdGF0ZS5wbGF5ZXIudXBkYXRlKCk7XHJcbiAgICBnYW1lU3RhdGUucHJvamVjdGlsZXMuZm9yRWFjaCgocHJvamVjdGlsZSkgPT4gcHJvamVjdGlsZS51cGRhdGUoKSk7XHJcbiAgICBjaGVja1Byb2plY3RpbGVzTWluaW9uQ29sbGlzaW9uKGdhbWVTdGF0ZS5wcm9qZWN0aWxlcyk7XHJcbiAgICB1cGRhdGVNaW5pb25zKGdhbWVTdGF0ZS5taW5pb25zLCBnYW1lU3RhdGUucHJvamVjdGlsZXMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1Byb2plY3RpbGVzTWluaW9uQ29sbGlzaW9uKF9wcm9qZWN0aWxlczogQXR0YWNrUHJvamVjdGlsZVtdKSB7XHJcbiAgICBjb25zdCBwcm9qZWN0aWxlcyA9IF9wcm9qZWN0aWxlcy5maWx0ZXIoKHsgY29sbGlkZXIsIHRhcmdldCwgYXR0YWNrIH0pID0+IHtcclxuICAgICAgICBpZiAoY29sbGlkZXIuaXNBdENlbnRlck9mKHRhcmdldC5jb2xsaWRlcikpIHtcclxuICAgICAgICAgICAgdGFyZ2V0LnRha2VEYW1hZ2UoYXR0YWNrKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGdhbWVTdGF0ZS5wcm9qZWN0aWxlcyA9IHByb2plY3RpbGVzO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVNaW5pb25zKF9taW5pb25zOiBNaW5pb25bXSwgX3Byb2plY3RpbGVzOiBQcm9qZWN0aWxlPENpcmNsZUNvbGxpZGVyPltdKSB7XHJcbiAgICBjb25zdCBtaW5pb25zID0gX21pbmlvbnMuZmlsdGVyKChtaW5pb24pID0+IHtcclxuICAgICAgICBpZiAobWluaW9uLmJhc2VTdGF0cy5oZWFsdGggPT09IDApIHtcclxuICAgICAgICAgICAgb25NaW5pb25EZWF0aChtaW5pb24pO1xyXG4gICAgICAgICAgICBpZiAoX3Byb2plY3RpbGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBnYW1lU3RhdGUubWluaW9ucyA9IG1pbmlvbnM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uTWluaW9uRGVhdGgobWluaW9uOiBNaW5pb24pIHtcclxuICAgIGNvbnN0IHsgZ29sZFZhbHVlIH0gPSBtaW5pb247XHJcbiAgICBnYW1lU3RhdGUucGxheWVyR29sZCArPSBnb2xkVmFsdWU7XHJcbiAgICBnYW1lU3RhdGUucGxheWVyQ3JlZXBTY29yZSsrO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0KCkge1xyXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfSk7XHJcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IGdldEV2ZW50Q29vcmRpbmF0ZXMoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSBnZXRDbGlja1R5cGUoZXZlbnQuYnV0dG9uKTtcclxuICAgICAgICBoYW5kbGVDbGljayh4LCB5LCB0eXBlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDbGljayh4OiBudW1iZXIsIHk6IG51bWJlciwgdHlwZTogXCJsZWZ0XCIgfCBcInJpZ2h0XCIgfCBcIm90aGVyXCIpIHtcclxuICAgIGNvbnN0IHsgcGxheWVyIH0gPSBnYW1lU3RhdGU7XHJcbiAgICBpZiAodHlwZSA9PT0gXCJyaWdodFwiKSB7XHJcbiAgICAgICAgY29uc3QgbWluaW9uID0gZ2V0Q2xpY2tlZE1pbmlvbih4LCB5KTtcclxuICAgICAgICBpZiAobWluaW9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGF1dG9BdHRhY2tNaW5pb24ocGxheWVyLmNvbGxpZGVyLmdldENlbnRlckNvb3JkaW5hdGVzKCksIG1pbmlvbiwgcGxheWVyLmF1dG9BdHRhY2soKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGxheWVyLm1vdmVUbyh4LCB5KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwibGVmdFwiKSB7XHJcbiAgICAgICAgYWRkTWluaW9uKHgsIHkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRFdmVudENvb3JkaW5hdGVzKGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6IGV2ZW50LmNsaWVudFggLSBjYW52YXMub2Zmc2V0TGVmdCxcclxuICAgICAgICB5OiBldmVudC5jbGllbnRZIC0gY2FudmFzLm9mZnNldFRvcCxcclxuICAgIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENsaWNrZWRNaW5pb24oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGdhbWVTdGF0ZS5taW5pb25zLmZpbmQoXHJcbiAgICAgICAgKG1pbmlvbikgPT4gbWluaW9uLnggPD0geCAmJiBtaW5pb24ueCArIG1pbmlvbi5jb2xsaWRlci53aWR0aCA+PSB4ICYmIG1pbmlvbi55IDw9IHkgJiYgbWluaW9uLnkgKyBtaW5pb24uY29sbGlkZXIuaGVpZ2h0ID49IHksXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHRhcmdldCB8fCBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRNaW5pb24oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIGdhbWVTdGF0ZS5taW5pb25zLnB1c2goY3JlYXRlTWluaW9uKHgsIHkpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYXV0b0F0dGFja01pbmlvbihvcmlnaW46IENvb3JkaW5hdGVzLCBtaW5pb246IE1pbmlvbiwgYXR0YWNrOiBBdHRhY2spIHtcclxuICAgIGNvbnN0IHByb2plY3RpbGUgPSBjcmVhdGVQcm9qZWN0aWxlKG9yaWdpbiwgbWluaW9uLCBhdHRhY2spO1xyXG4gICAgZ2FtZVN0YXRlLnByb2plY3RpbGVzLnB1c2gocHJvamVjdGlsZSk7XHJcbiAgICBnYW1lU3RhdGUucGxheWVyLnN0b3BNb3ZlbWVudCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDbGlja1R5cGUoYnV0dG9uOiBudW1iZXIpIHtcclxuICAgIHN3aXRjaCAoYnV0dG9uKSB7XHJcbiAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJsZWZ0XCI7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJyaWdodFwiO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBcIm90aGVyXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbnN0YXJ0KCk7XHJcbiJdLCJuYW1lcyI6WyJDaXJjbGVDb2xsaWRlciIsIkNvbGxpZGVyIiwieCIsInkiLCJyYWRpdXMiLCJzdXBlciIsInRoaXMiLCJnZXRDZW50ZXJDb29yZGluYXRlcyIsImNvb3JkcyIsImNvbGxpZGVzV2l0aCIsIm90aGVyIiwiaXNDaXJjbGUiLCJjaXJjbGVUb0NpcmNsZUNvbGxpc2lvbiIsImlzUmVjdGFuZ2xlIiwiY2lyY2xlVG9SZWN0YW5nbGVDb2xsaXNpb24iLCJnZXRDZW50ZXJYT2Zmc2V0IiwiZ2V0Q2VudGVyWU9mZnNldCIsImNvbnN0cnVjdG9yIiwiaXNBdENlbnRlck9mIiwib3RoZXJDZW50ZXJDb29yZHMiLCJpc0F0Iiwib3RoZXJDb29yZHMiLCJjZW50ZXJDb29yZHMiLCJSZWN0YW5nbGVDb2xsaWRlciIsIndpZHRoIiwiaGVpZ2h0IiwicmVjdGFuZ2xlVG9SZWN0YW5nbGVDb2xsaXNpb24iLCJjb2xsaWRlciIsInVuZGVmaW5lZCIsImMxIiwiYzIiLCJjaXJjIiwicmVjdCIsImRlbHRhWCIsIk1hdGgiLCJhYnMiLCJkZWx0YVkiLCJyZWN0MSIsInJlY3QyIiwiR2FtZU9iamVjdCIsIk1vdmVhYmxlR2FtZU9iamVjdCIsInNwZWVkIiwic3RlcCIsInRhcmdldENvb3JkcyIsInNsb3BlIiwic3FydCIsInNpZ24iLCJtaW5NYXhYIiwibWluIiwibWF4IiwibWluTWF4WSIsIlByb2plY3RpbGUiLCJkYW1hZ2UiLCJ0YXJnZXQiLCJhdHRhY2siLCJ1cGRhdGUiLCJDcmVhdHVyZSIsImJhc2VTdGF0cyIsImdvbGRWYWx1ZSIsIm1vdmVtZW50U3BlZWQiLCJ0YWtlRGFtYWdlIiwiZGFtYWdlQWZ0ZXJBcm1vciIsImFybW9yIiwiZGFtYWdlQWZ0ZXJNYWdpY1Jlc2lzdCIsIm1hZ2ljUmVzaXN0IiwidG90YWxEYW1hZ2UiLCJjb25zb2xlIiwibG9nIiwicGh5c2ljYWxEYW1hZ2UiLCJoZWFsdGgiLCJhdHRhY2tEYW1hZ2UiLCJhdXRvQXR0YWNrIiwibWFnaWNEYW1hZ2UiLCJhYmlsaXR5UG93ZXIiLCJtb3ZlVG8iLCJzdG9wTW92ZW1lbnQiLCJDcmVhdHVyZUZhY3RvcnkiLCJnZXQiLCJpbnN0YW5jZSIsIm5ld0NyZWF0dXJlIiwic3RhdHMiLCJ3aXRoQ2lyY2xlQ29sbGlkZXIiLCJ3aXRoUmVjdGFuZ2xlQ29sbGlkZXIiLCJjcmVhdGVDb2xsaWRlciIsIndpdGhUYXJnZXRDb29yZHMiLCJidWlsZCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwicGxheWVySW1hZ2UiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwiZ2FtZVN0YXRlIiwicGxheWVyIiwibWF4SGVhbHRoIiwicGxheWVyR29sZCIsInBsYXllckNyZWVwU2NvcmUiLCJtaW5pb25zIiwicHJvamVjdGlsZXMiLCJyZW5kZXJNYXhIZWFsdGhCYXIiLCJjcmVhdHVyZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwicmVuZGVySGVhbHRoQmFyIiwiaGVhbHRoVG9XaWR0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiY2xpZW50WCIsIm9mZnNldExlZnQiLCJjbGllbnRZIiwib2Zmc2V0VG9wIiwiZ2V0RXZlbnRDb29yZGluYXRlcyIsInR5cGUiLCJtaW5pb24iLCJmaW5kIiwiZ2V0Q2xpY2tlZE1pbmlvbiIsIm9yaWdpbiIsInByb2plY3RpbGUiLCJjcmVhdGVQcm9qZWN0aWxlIiwicHVzaCIsImF1dG9BdHRhY2tNaW5pb24iLCJjcmVhdGVNaW5pb24iLCJhZGRNaW5pb24iLCJoYW5kbGVDbGljayIsImJ1dHRvbiIsImdldENsaWNrVHlwZSIsImdhbWVMb29wIiwiZm9yRWFjaCIsIl9wcm9qZWN0aWxlcyIsImZpbHRlciIsImNoZWNrUHJvamVjdGlsZXNNaW5pb25Db2xsaXNpb24iLCJfbWluaW9ucyIsIm9uTWluaW9uRGVhdGgiLCJsZW5ndGgiLCJ1cGRhdGVNaW5pb25zIiwiY2xlYXJSZWN0IiwiYmVnaW5QYXRoIiwiYXJjIiwiUEkiLCJmaWxsIiwiY2xvc2VQYXRoIiwiZHJhd0ltYWdlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==